/* @rune-langium/visual-editor — Base styles
 *
 * All colors reference design-system tokens via var() with light-theme
 * fallbacks. When embedded in the studio (which loads theme.css), the
 * dark-palette tokens take effect automatically. Standalone usage
 * falls back to the original light palette.
 */

.rune-type-graph {
  width: 100%;
  height: 100%;
  position: relative;
}

/* ── Node base ────────────────────────────────────────────────── */

.rune-node {
  border-radius: var(--radius-lg, 6px);
  border: 2px solid var(--color-node-border, #e2e8f0);
  background: var(--color-node-bg, #ffffff);
  font-family: var(--font-sans, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);
  font-size: var(--text-base, 13px);
  min-width: 200px;
  box-shadow: var(--shadow-sm, 0 1px 3px rgba(0, 0, 0, 0.1));
  color: var(--color-node-text, #1a202c);
}

.rune-node-header {
  padding: var(--space-4, 8px) var(--space-6, 12px);
  font-weight: 600;
  font-size: var(--text-md, 14px);
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  gap: var(--space-3, 6px);
}

.rune-node-kind-badge {
  font-size: var(--text-xs, 10px);
  padding: var(--space-1, 1px) var(--space-3, 6px);
  border-radius: var(--radius-sm, 3px);
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.rune-node-body {
  padding: var(--space-4, 8px) var(--space-6, 12px);
}

.rune-node-member {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-1, 3px) 0;
  gap: var(--space-4, 8px);
}

.rune-node-member-name {
  color: var(--color-node-text, #1a202c);
}

.rune-node-member-type {
  color: var(--color-node-member-type, #718096);
  font-style: italic;
}

.rune-node-member-cardinality {
  color: var(--color-node-member-card, #a0aec0);
  font-size: var(--text-xs, 11px);
}

.rune-node-member-override {
  opacity: 0.6;
  font-style: italic;
}

/* ── Data node (blue) ─────────────────────────────────────────── */

.rune-node-data {
  border-color: var(--color-data, #4299e1);
}

.rune-node-data .rune-node-header {
  background: var(--color-data-bg, #ebf8ff);
  color: var(--color-data-text, #2b6cb0);
}

.rune-node-data .rune-node-kind-badge {
  background: var(--color-data-badge, #bee3f8);
  color: var(--color-data-text, #2a69ac);
}

/* ── Choice node (amber) ──────────────────────────────────────── */

.rune-node-choice {
  border-color: var(--color-choice, #ed8936);
}

.rune-node-choice .rune-node-header {
  background: var(--color-choice-bg, #fffaf0);
  color: var(--color-choice-text, #c05621);
}

.rune-node-choice .rune-node-kind-badge {
  background: var(--color-choice-badge, #feebc8);
  color: var(--color-choice-text, #c05621);
}

/* ── Enum node (green) ────────────────────────────────────────── */

.rune-node-enum {
  border-color: var(--color-enum, #48bb78);
}

.rune-node-enum .rune-node-header {
  background: var(--color-enum-bg, #f0fff4);
  color: var(--color-enum-text, #276749);
}

.rune-node-enum .rune-node-kind-badge {
  background: var(--color-enum-badge, #c6f6d5);
  color: var(--color-enum-text, #276749);
}

/* ── Function node (purple) ───────────────────────────────────── */

.rune-node-func {
  border-color: var(--color-func, #a855f7);
}

.rune-node-func .rune-node-header {
  background: var(--color-func-bg, rgba(168, 85, 247, 0.15));
  color: var(--color-func-text, #d8b4fe);
}

.rune-node-func .rune-node-kind-badge {
  background: var(--color-func-badge, rgba(168, 85, 247, 0.25));
  color: var(--color-func-text, #d8b4fe);
}

/* ── Node error indicator ─────────────────────────────────────── */

.rune-node-errors {
  border-left: 3px solid var(--color-error, #e53e3e);
  padding: var(--space-2, 4px) var(--space-4, 8px);
  margin: var(--space-2, 4px) var(--space-4, 8px) var(--space-4, 8px);
  background: var(--color-error-bg, #fff5f5);
  font-size: var(--text-sm, 12px);
  color: var(--color-error-text, #c53030);
}

/* ── Edge styles ──────────────────────────────────────────────── */

.rune-edge-extends {
  stroke: var(--color-data, #4299e1);
  stroke-width: 2;
}

.rune-edge-attribute-ref {
  stroke: var(--color-edge-ref, #718096);
  stroke-width: 1.5;
  stroke-dasharray: 5 3;
}

.rune-edge-choice-option {
  stroke: var(--color-choice, #ed8936);
  stroke-width: 1.5;
}

.rune-edge-enum-extends {
  stroke: var(--color-enum, #48bb78);
  stroke-width: 2;
}

/* Edge label (positioned by EdgeLabelRenderer) */
.rune-edge-label {
  font-size: var(--text-xs, 11px);
  background: var(--color-edge-label-bg, #ffffff);
  padding: var(--space-1, 1px) var(--space-2, 4px);
  border-radius: var(--radius-sm, 3px);
  border: 1px solid var(--color-edge-label-border, #e2e8f0);
  color: var(--color-node-text, #1a202c);
  pointer-events: all;
}

.rune-edge-label__cardinality {
  color: var(--color-edge-label-text, #a0aec0);
  margin-left: var(--space-2, 4px);
}

/* ── Panel styles ─────────────────────────────────────────────── */

.rune-panel {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg, 6px);
  box-shadow: var(--shadow-lg, 0 2px 8px rgba(0, 0, 0, 0.08));
  padding: var(--space-6, 12px);
  font-family: var(--font-sans, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);
  font-size: var(--text-base, 13px);
  color: var(--foreground);
}

.rune-panel-header {
  font-weight: 600;
  font-size: var(--text-md, 14px);
  margin-bottom: var(--space-4, 8px);
  color: var(--foreground);
}

/* ── Search panel ─────────────────────────────────────────────── */

.rune-search-input {
  width: 100%;
  padding: var(--space-3, 6px) var(--space-5, 10px);
  border: 1px solid var(--input);
  border-radius: var(--radius-md, 4px);
  font-size: var(--text-base, 13px);
  outline: none;
  background: var(--background);
  color: var(--foreground);
}

.rune-search-input:focus {
  border-color: var(--primary);
  box-shadow: 0 0 0 1px var(--primary);
}

.rune-search-panel__results {
  margin-top: var(--space-2, 4px);
  font-size: var(--text-sm, 12px);
  color: var(--muted-foreground);
}

.rune-search-panel__filter-section {
  margin-top: var(--space-4, 8px);
}

.rune-search-panel__filter-buttons {
  display: flex;
  gap: var(--space-2, 4px);
}

.rune-search-panel__orphan-toggle {
  margin-top: var(--space-4, 8px);
}

.rune-search-panel__orphan-label {
  display: flex;
  align-items: center;
  gap: var(--space-2, 4px);
  font-size: var(--text-sm, 12px);
  cursor: pointer;
  color: var(--foreground);
}

/* ── Toolbar ──────────────────────────────────────────────────── */

.rune-toolbar {
  display: flex;
  gap: var(--space-2, 4px);
}

.rune-toolbar-button {
  padding: var(--space-3, 6px) var(--space-5, 10px);
  border: 1px solid var(--input);
  border-radius: var(--radius-md, 4px);
  background: var(--muted);
  cursor: pointer;
  font-size: var(--text-sm, 12px);
  color: var(--foreground);
}

.rune-toolbar-button:hover {
  background: var(--input);
  color: var(--foreground);
}

.rune-toolbar-button-active {
  background: var(--primary);
  border-color: var(--primary);
  color: #ffffff;
}

.rune-toolbar-select {
  font-size: var(--text-sm, 12px);
  padding: var(--space-2, 4px) var(--space-3, 6px);
  border: 1px solid var(--input);
  border-radius: var(--radius-md, 4px);
  background: var(--muted);
  color: var(--foreground);
  cursor: pointer;
}

.rune-toolbar-select:hover {
  background: var(--input);
  color: var(--foreground);
}

/* ── Detail panel ─────────────────────────────────────────────── */

.rune-detail-section {
  margin-bottom: var(--space-6, 12px);
}

.rune-detail-label {
  font-size: var(--text-xs, 11px);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--muted-foreground);
  margin-bottom: var(--space-2, 4px);
}

.rune-detail-value {
  color: var(--foreground);
}

/* ── Selection / search highlight ─────────────────────────────── */

.rune-node-selected {
  box-shadow: 0 0 0 2px var(--primary);
}

.rune-node-search-match {
  box-shadow: 0 0 0 2px var(--color-warning, #ecc94b);
}

.rune-node-dimmed {
  opacity: 0.3;
}
